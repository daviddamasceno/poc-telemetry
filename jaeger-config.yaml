# Configuração do Jaeger para Service Performance Monitoring (SPM)
# Baseado em: https://www.jaegertracing.io/docs/2.12/architecture/spm/

# Configuração do Query Service (que expõe a UI)
query:
  # Habilitar o menu Monitor na UI
  ui-config: |
    {
      "monitor": {
        "menuEnabled": true
      }
    }
  
  # Configuração de storage para traces (memória)
  storage:
    type: memory
    memory:
      max-traces: 100000

# Configuração de métricas para SPM
# Usando Prometheus como backend de métricas
# Esta configuração é feita via extensions no formato correto
extensions:
  jaeger_storage:
    backends:
      memory:
        memory:
          max-traces: 100000
    metric_backends:
      prometheus:
        prometheus:
          endpoint: http://prometheus:9090
          normalize_calls: true
          normalize_duration: true

  jaeger_query:
    storage:
      traces: memory
    metrics_storage: prometheus

# Collector OTLP habilitado
collector:
  otlp:
    enabled: true
    grpc:
      endpoint: 0.0.0.0:4317
    http:
      endpoint: 0.0.0.0:4318
